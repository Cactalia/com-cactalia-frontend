<div class="row container-fluid card shadow px-0 pt-4 pb-4 mx-0 mb-4">   
    <form class="col-12" [formGroup]="detailForm">
        <div class="row">
            <div class="col-12">
                <h5>Programa de estudio</h5>
            </div>
            <div class="col-12">
                <h6>Información general</h6>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-12 col-md-2">
                <label for="version">Versión</label>
                <input formControlName="version" type="text" class="form-control" id="version" maxlength="29">
            </div>
            <div class="form-group col-12 col-md-7">
                <label for="learningUnitName">Unidad de aprendizaje</label>
                <input formControlName="learningUnitName" type="text" class="form-control" id="learningUnitName" maxlength="29">
            </div>
            <div class="form-group col-12 col-md-3">
                <label for="status">Estado</label>
                <input formControlName="status" type="text" class="form-control" id="status" maxlength="29">
            </div>
        </div>
        <div class="row">
            <div class="form-group col-12 col-md-4">
                <label for="creationDate">Fecha de asignación</label>
                <input formControlName="creationDate" type="text" class="form-control" id="creationDate" maxlength="29">
            </div>
            <div class="form-group col-12 col-md-4">
                <label for="approvalDate">Fecha de aprobación</label>
                <input formControlName="approvalDate" type="text" class="form-control" id="approvalDate" maxlength="29">
            </div>
        </div>        
        
        <div class="row">
            <div class="form-group col-12">
                <label for="presentation">Presentación</label>
                <textarea formControlName="presentation" class="form-control" id="presentation" rows="1" [class.is-invalid]="detailForm.get('presentation').errors">
                </textarea>
                <small *ngIf="detailForm.get('presentation').errors?.required" class="form-text text-danger">Requerido.</small>
                <small *ngIf="detailForm.get('presentation').errors?.pattern" class="form-text text-danger">No valido.</small>
                <small *ngIf="detailForm.get('presentation').errors?.maxlength" class="form-text text-danger">Máximo 2000 caractéres.</small>
            </div>
        </div>
    </form>
</div>
<div class="row container-fluid card shadow px-0 mt-4 pt-4 pb-4 mx-0 mb-4">   
    <form class="col-12">
        <div class="row">
            <div class="col-12 d-flex justify-content-between align-items-center">
                <h5>Unidades temáticas</h5>
                <button class="btn btn-primary d-flex" type="button" (click)="newThematicUnit()">
                    <span class="material-icons text-light mr-1">add</span>
                    Agregar
                </button>
            </div>
            <div class="col-12">
                <h6>Contenidos de la unidad de aprendizaje y su organización</h6>
            </div>
        </div>
        <div *ngFor="let thematicUnitForm of thematicUnitsArrayForm.controls; let i = index">
            <ng-container [formGroup]="thematicUnitForm">
                <div class="row">
                    <div class="form-group col-12">
                        <label>Nombre</label>
                        <input type="text" class="form-control" formControlName="name" [class.is-invalid]="thematicUnitForm.get('name').errors"/>
                        <small *ngIf="thematicUnitForm.get('name').errors?.required" class="form-text text-danger">Requerido.</small>
                        <small *ngIf="thematicUnitForm.get('name').errors?.maxlength" class="form-text text-danger">Máximo 500 caractéres.</small>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-12">
                        <label>Objetivo</label>
                        <textarea type="text" class="form-control" formControlName="objective" rows="1" [class.is-invalid]="thematicUnitForm.get('objective').errors">
                        </textarea>
                        <small *ngIf="thematicUnitForm.get('objective').errors?.required" class="form-text text-danger">Requerido.</small>
                        <small *ngIf="thematicUnitForm.get('objective').errors?.maxlength" class="form-text text-danger">Máximo 2000 caractéres.</small>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-12">
                        <label>Temas</label>
                        <textarea type="text" class="form-control" formControlName="topics" rows="1" [class.is-invalid]="thematicUnitForm.get('topics').errors">
                        </textarea>
                        <small *ngIf="thematicUnitForm.get('topics').errors?.required" class="form-text text-danger">Requerido.</small>
                        <small *ngIf="thematicUnitForm.get('topics').errors?.maxlength" class="form-text text-danger">Máximo 2000 caractéres.</small>
                    </div>
                </div>
            </ng-container>
            <div class="row ">
                <div class="col-12 d-flex justify-content-end">
                    <button type="button" class="btn btn-danger ml-2" (click)="deleteThematicUnit(i)">
                        Eliminar</button>
                </div>
            </div>
            <hr *ngIf="i != thematicUnitsArrayForm.length-1">
        </div>    
    </form>
</div>
<div class="row container-fluid card shadow px-0 mt-4 pt-4 pb-4 mx-0 mb-4">   
    <form class="col-12" [formGroup]="detailForm" (ngSubmit)="completeAssign()">
        <div class="row">
            <div class="col-12">
                <h5>Acervo bibliográfico</h5>
            </div>
            <div class="col-12">
                <h6>Referencias en sistema APA sexta edición </h6>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-12">
                <label for="basicBibliographic">Acervo bibliográfico básico</label>
                <textarea formControlName="basicBibliographic" class="form-control" id="basicBibliographic" rows="1" [class.is-invalid]="detailForm.get('basicBibliographic').errors">
                </textarea>
                <small *ngIf="detailForm.get('basicBibliographic').errors?.required" class="form-text text-danger">Requerido.</small>
                <small *ngIf="detailForm.get('basicBibliographic').errors?.pattern" class="form-text text-danger">No valido.</small>
                <small *ngIf="detailForm.get('basicBibliographic').errors?.maxlength" class="form-text text-danger">Máximo 2000 caractéres.</small>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-12">
                <label for="complementaryBibliographic">Acervo bibliográfico complementario</label>
                <textarea formControlName="complementaryBibliographic" class="form-control" id="complementaryBibliographic" rows="1" [class.is-invalid]="detailForm.get('complementaryBibliographic').errors">
                </textarea>
                <small *ngIf="detailForm.get('complementaryBibliographic').errors?.required" class="form-text text-danger">Requerido.</small>
                <small *ngIf="detailForm.get('complementaryBibliographic').errors?.pattern" class="form-text text-danger">No valido.</small>
                <small *ngIf="detailForm.get('complementaryBibliographic').errors?.maxlength" class="form-text text-danger">Máximo 2000 caractéres.</small>
            </div>
        </div>        
        <div class="row ">
            <div class="col-12 d-flex justify-content-end">
                <button class="btn btn-secondary" type="button" (click)="showDetailsCancel()" [disabled]="loadingCompleteAssign">Regresar</button>
                <button class="btn btn-primary ml-2" [disabled]="detailForm.invalid || loadingCompleteAssign || thematicUnitsArrayForm.length <=0 || thematicUnitsArrayForm.invalid">
                    <span *ngIf="loadingCompleteAssign" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                    Completar asignación</button>
            </div>
        </div>
    </form>
</div>